<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" preserveAspectRatio="true" version="1.1" viewBox="0 0 669 326" zoomAndPan="magnify"><defs><filter height="300%" id="f1ljdz4niabxua" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="16" cy="40" fill="#000000" filter="url(#f1ljdz4niabxua)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f1ljdz4niabxua)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="97.5" y="8"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="97.5" x2="272.5" y1="34.2969" y2="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="34" x="168" y="25.9951">new</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="102.5" y="50.4355">persistent identity = null</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="102.5" y="64.4043">persistent context = null</text><rect fill="#FEFECE" filter="url(#f1ljdz4niabxua)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="362.5" y="8"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="362.5" x2="533.5" y1="34.2969" y2="34.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="72" x="412" y="25.9951">managed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="367.5" y="50.4355">persistent identity = id</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="151" x="367.5" y="64.4043">persistent context = ctx</text><rect fill="#FEFECE" filter="url(#f1ljdz4niabxua)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="171" x="234.5" y="149"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="234.5" x2="405.5" y1="175.2969" y2="175.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="70" x="285" y="166.9951">removed</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="239.5" y="191.4355">persistent identity = id</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="151" x="239.5" y="205.4043">persistent context = ctx</text><rect fill="#FEFECE" filter="url(#f1ljdz4niabxua)" height="64.2344" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="482.5" y="149"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="482.5" x2="657.5" y1="175.2969" y2="175.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="533" y="166.9951">detached</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="143" x="487.5" y="191.4355">persistent identity = id</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="487.5" y="205.4043">persistent context = null</text><polygon fill="#FBFB77" filter="url(#f1ljdz4niabxua)" points="240,274,240,314.2656,400,314.2656,400,284,390,274,240,274" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="240,274,240,314.2656,400,314.2656,400,284,390,274,324,274,320,213.215,316,274,240,274" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="390" x2="390" y1="274" y2="284"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="400" x2="390" y1="284" y2="284"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="246" y="291.0669">marked from removal</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="254" y="306.1997">from DB</text><!--link *start to new--><path d="M26.0656,40 C39.7124,40 65.4827,40 92.3616,40 " fill="none" id="*start-new" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="97.3907,40,88.3907,36,92.3907,40,88.3907,44,97.3907,40" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="44.25" y="33.0669">new()</text><!--link new to managed--><path d="M272.575,40 C299.725,40 329.697,40 357.069,40 " fill="none" id="new-managed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="362.148,40,353.148,36,357.148,40,353.148,44,362.148,40" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="291" y="33.0669">persist()</text><!--link managed to managed--><path d="M533.564,27.135 C553.668,28.192 568.5,32.48 568.5,40 C568.5,46.873 556.108,51.047 538.624,52.521 " fill="none" id="managed-managed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="533.564,52.865,542.8152,56.2438,538.5524,52.525,542.2712,48.2623,533.564,52.865" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="55" x="574.5" y="44.5669">refresh()</text><!--link managed to removed--><path d="M362.411,56.061 C336.751,65.008 311.37,79.27 296,102 C287.515,114.548 290.303,130.22 296.428,144.217 " fill="none" id="managed-removed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="298.622,148.893,298.42,139.0462,296.498,144.3665,291.1777,142.4446,298.622,148.893" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="297" y="115.0669">remove()</text><!--link removed to managed--><path d="M348.63,148.91 C368.536,127.293 395.098,98.448 415.752,76.02 " fill="none" id="removed-managed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="419.274,72.194,410.2351,76.1054,415.8872,75.8722,416.1203,81.5243,419.274,72.194" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="392" y="115.0669">persist()</text><!--link managed to detached--><path d="M461.951,72.055 C469.579,87.133 479.935,104.973 492,119 C500.214,128.55 510.116,137.63 520.067,145.728 " fill="none" id="managed-detached" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="524.028,148.899,519.5036,140.1508,520.1253,145.7734,514.5027,146.3951,524.028,148.899" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="54" x="493" y="115.0669">detach()</text><!--link detached to managed--><path d="M568.517,148.728 C566.445,133.419 561.873,115.44 552,102 C544.342,91.575 534.321,82.629 523.524,75.054 " fill="none" id="detached-managed" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="519.187,72.11,524.3852,80.4753,523.3234,74.919,528.8797,73.8571,519.187,72.11" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="561" y="115.0669">merge()</text><!--
@startuml
[*] -right-> new: new()
new -right-> managed: persist()
managed - -> managed: refresh()
managed - -> removed: remove()
removed - -> managed: persist()
managed - -> detached: detach()
detached - -> managed: merge()

state new: persistent identity = null
state new: persistent context = null

state managed: persistent identity = id
state managed: persistent context = ctx

state removed: persistent identity = id
state removed: persistent context = ctx

state detached: persistent identity = id
state detached: persistent context = null

note bottom of removed
 marked from removal
   from DB
end note
skinparam state {
 FontStyle bold
}
@enduml

PlantUML version 1.2017.16(Sun Sep 03 10:53:37 UTC 2017)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.7.0_25-b15
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>